# Livermore Strategy v1.0 - 利弗莫尔交易策略指标

## 📊 指标简介

基于 GMMA（顾比复合移动平均线）和 SuperTrend（超级趋势）的双重确认交易系统，灵感来自传奇交易员杰西·利弗莫尔的趋势跟踪理念。该指标专注于捕捉中长期趋势反转点，并提供完整的交易可视化和盈亏追踪功能。

## 🎯 核心指标

### 1. GMMA（顾比复合移动平均线）
- **短期组**：EMA 3, 5, 8, 10, 12, 15（代表短线交易者）
- **长期组**：EMA 30, 35, 40, 45, 50, 60（代表长线投资者）
- **计算方式**：分别对短期组和长期组求平均值，得到两条综合趋势线
- **信号含义**：
  - 短期均线上穿长期均线 = 看涨信号
  - 短期均线下穿长期均线 = 看跌信号

### 2. SuperTrend（超级趋势指标）
- **参数**：ATR 周期 10，倍数因子 3.0（可自定义）
- **作用**：识别主要趋势方向，过滤假突破
- **信号含义**：
  - 价格在 SuperTrend 线上方 + 趋势向上 = 多头趋势
  - 价格在 SuperTrend 线下方 + 趋势向下 = 空头趋势

## 📈 交易信号

### 买入信号（BUY）
同时满足以下条件：
1. ✅ GMMA 短期组上穿长期组（金叉）
2. ✅ 价格在 SuperTrend 线上方
3. ✅ SuperTrend 趋势向上

### 卖出信号（SELL）
同时满足以下条件：
1. ✅ GMMA 短期组下穿长期组（死叉）
2. ✅ 价格在 SuperTrend 线下方
3. ✅ SuperTrend 趋势向下

## 🎨 可视化功能

### 1. 智能标签系统
- **信号编号**：每个信号自动编号（BUY #1, #2, #3...）
  - 同方向连续信号：编号递增
  - 方向改变时：重置为 #1
- **价格显示**：实时显示信号触发价格
- **盈亏显示**：自动计算并显示每笔交易的盈亏（Δ）

### 2. 动态标签定位
- **自适应距离**：基于 ATR 的 1.5 倍 + 50 点动态偏移
- **买入标签**：位于 K 线下方，绿色向上箭头
- **卖出标签**：位于 K 线上方，红色向下箭头
- **不遮挡价格**：标签自动与 K 线保持合理距离

### 3. 盈亏连线
- **双向追踪**：
  - 买入 → 卖出（做多盈亏）
  - 卖出 → 买入（做空盈亏）
- **颜色编码**：
  - 绿色线 = 盈利
  - 红色线 = 亏损
- **实时计算**：自动显示点数盈亏

### 4. 虚线指向
- 从标签到 K 线的半透明虚线
- 清晰标识信号对应的具体 K 线位置

## ⚙️ 可调参数

| 参数 | 默认值 | 说明 |
|------|--------|------|
| ATR 周期 | 10 | SuperTrend 计算周期 |
| SuperTrend 因子 | 3.0 | 趋势灵敏度（越大越稳定）|


## 💡 使用建议

### 适用场景
✅ **趋势市场**：在明确的上涨或下跌趋势中表现最佳  
✅ **中长线交易**：适合 H1、H4、D1 时间周期  
✅ **趋势跟踪**：捕捉大级别趋势反转机会  

### 风险提示
⚠️ **震荡市场**：在横盘整理阶段可能产生假信号  
⚠️ **快速波动**：剧烈波动时建议结合其他指标确认  
⚠️ **需要确认**：建议等待 K 线收盘后再执行交易  

### 优化技巧
1. **调整 SuperTrend 因子**：
   - 增大（如 4.0）= 减少信号，提高准确率
   - 减小（如 2.0）= 增加信号，更灵敏
   
2. **多时间周期确认**：
   - 在高级别周期（如 D1）查看大趋势
   - 在低级别周期（如 H1）寻找入场点
   
3. **结合支撑阻力**：
   - 在关键支撑位附近的买入信号更可靠
   - 在关键阻力位附近的卖出信号更可靠

## 📊 信号统计功能

### 编号系统用途
- **追踪信号质量**：观察哪些编号的信号成功率更高
- **识别过度交易**：连续多个同方向信号可能表示市场震荡
- **优化进出场**：
  - 例如：只在 #1 信号入场（首次反转）
  - 或者：#2、#3 信号用于加仓

### 盈亏追踪
- **做多盈亏**：卖出价 - 买入价
- **做空盈亏**：卖出价 - 买入价（平仓时显示）
- **持续记录**：每笔交易的盈亏都会显示在标签上

## 🔔 提醒功能（可选）

指标内置 `alert()` 函数支持，可设置 TradingView 提醒：
- 买入信号：🟢 自动通知
- 卖出信号：🔴 自动通知
- 支持多种通知方式：浏览器、手机 App、邮件、Webhook

## 📝 技术细节

### GMMA 计算逻辑
```
短期平均 = (EMA3 + EMA5 + EMA8 + EMA10 + EMA12 + EMA15) / 6
长期平均 = (EMA30 + EMA35 + EMA40 + EMA45 + EMA50 + EMA60) / 6
```

### SuperTrend 计算
```
HL2 = (最高价 + 最低价) / 2
上轨 = HL2 + (ATR × 因子)
下轨 = HL2 - (ATR × 因子)
```

### 信号编号逻辑
```
IF 当前信号方向 == 上一个信号方向 THEN
    编号 = 上一个编号 + 1
ELSE
    编号 = 1  // 重置
```

## 🎓 策略理念

该策略遵循杰西·利弗莫尔的核心交易原则：
1. **顺势而为**：只在趋势明确时交易
2. **耐心等待**：等待多个指标共振确认
3. **记录追踪**：详细记录每笔交易的盈亏
4. **资金管理**：通过编号系统辅助仓位管理

## 📌 版本信息

- **版本**：v1.0
- **Pine Script 版本**：@version=5
- **图表类型**：overlay=true（叠加在主图）
- **作者**：基于 GMMA 和 SuperTrend 的复合策略

## 🔧 安装使用

1. 复制完整的 Pine Script 代码
2. 在 TradingView 打开图表
3. 点击"指标" → "Pine 编辑器"
4. 粘贴代码并点击"保存"
5. 添加到图表即可使用

## ⚖️ 免责声明

本指标仅供学习和研究使用，不构成投资建议。
交易有风险，投资需谨慎。使用本指标进行交易的一切后果由使用者自行承担。

---

💬 **反馈与改进**：如有问题或建议，欢迎交流讨论！

